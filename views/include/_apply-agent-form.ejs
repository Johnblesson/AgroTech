<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apartment Form</title>
    <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="./css/form.css">
</head>
<body>

<div class="formbold-main-wrapper">
  <div class="formbold-form-wrapper">
    <pre style="text-align: center; font: 0.6em sans-serif;">Apply for the farming program. 
      Make sure you input your correct informations. 
      We will notify when you are approved.
    </pre>

    <% if (messages.error) { %>
      <div class="alert alert-danger"><%= messages.error %></div>
    <% } %>
  
<form action="/agents" method="POST">

      <div class="formbold-mb-3 formbold-input-wrapp">
        <label for="fullname" class="formbold-form-label"> Fullname: </label>
        <div>
          <input
            type="text"
            name="fullname"
            id="fullname"
            readonly
            class="formbold-form-input"
            value="<%= user.fullname %>"
          />
        </div>
      </div>

      <!-- <div class="formbold-mb-3 formbold-input-wrapp">
        <label for="phone" class="formbold-form-label"> Phone (Number must Qcell): </label>
        <div>
          <input
            type="text"
            name="phone"
            id="phone"
            placeholder="Qcell Number without +232 (e.g 32983498)"
            class="formbold-form-input"
            required
          />
        </div>
      </div> -->

      <div class="formbold-mb-3 formbold-input-wrapp">
        <label for="phone" class="formbold-form-label"> Phone (Number must Qcell): </label>
        <div>
            <input
                type="text"
                name="phone"
                id="phone"
                placeholder="Qcell Number without +232 (e.g 32983498)"
                class="formbold-form-input"
                required
                oninput="validatePhone()"
            />
        </div>
    </div>
    <div id="phone-error" style="color: red; display: none;"></div>

      <div class="formbold-mb-3 formbold-input-wrapp">
        <label for="email" class="formbold-form-label"> Email: </label>
        <div>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="Email (Optional)"
            class="formbold-form-input"
          />
        </div>
      </div>

      <div class="formbold-mb-3">
        <label for="address" class="formbold-form-label">Current Address: </label>

        <input
          type="text"
          name="address"
          id="address"
          placeholder="Street address"
          class="formbold-form-input formbold-mb-3"
          required
        />
        <input
          type="text"
          name="address2"
          id="address2"
          placeholder="Street address line 2"
          class="formbold-form-input"
        />
      </div>
      <input
        type="hidden"
        name="username"
        value="<%= user.username %>"
      />

      <div class="formbold-mb-3">
        <label for="comments" class="formbold-form-label">
            Comments:
        </label>
        <textarea
          rows="6"
          name="comments"
          id="comments"
          class="formbold-form-input"
          placeholder="Add comments"
        ></textarea>
      </div>

      <button type="submit" class="formbold-btn">Done</button>
    </form>
  </div>
</div>
</body>
</html>


<script>
  function validatePhone() {
      const phoneInput = document.getElementById('phone');
      const phoneError = document.getElementById('phone-error');
      const phoneNumber = phoneInput.value.trim();
  
      // Check if the input has 8 digits and starts with 31, 32, or 34
      const isValidPhone = /^\d{8}$/.test(phoneNumber) && (phoneNumber.startsWith('31') || phoneNumber.startsWith('32') || phoneNumber.startsWith('34'));
  
      if (!isValidPhone) {
          phoneError.textContent = 'Your number is not a Qcell number';
          phoneError.style.display = 'block';
      } else {
          phoneError.textContent = '';
          phoneError.style.display = 'none';
      }
  }
  </script>